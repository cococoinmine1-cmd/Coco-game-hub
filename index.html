<!DOCTYPE html>
<html lang="si">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Coco Game Hub</title>
    <style>
        :root { --main-bg: #0f172a; --card-bg: #1e293b; --accent: #38bdf8; --success: #22c55e; }
        body { margin: 0; background: var(--main-bg); color: white; font-family: 'Segoe UI', sans-serif; overflow: hidden; }
        
        /* Screens Management */
        .screen { display: none; width: 100vw; height: 100vh; flex-direction: column; align-items: center; justify-content: center; position: absolute; }
        .active { display: flex !important; }

        /* UI Components */
        .top-bar { position: fixed; top: 0; width: 100%; height: 65px; background: rgba(15, 23, 42, 0.9); display: flex; justify-content: space-around; align-items: center; border-bottom: 2px solid var(--accent); z-index: 100; }
        .btn { padding: 12px 28px; border: none; border-radius: 12px; cursor: pointer; font-weight: bold; font-size: 16px; transition: 0.3s; background: var(--accent); color: white; box-shadow: 0 4px 15px rgba(56, 189, 248, 0.3); }
        .btn:active { transform: scale(0.95); }

        /* Game Selection */
        .hub-container { display: flex; gap: 20px; margin-top: 20px; }
        .game-card { background: var(--card-bg); padding: 25px; border-radius: 20px; text-align: center; cursor: pointer; border: 2px solid transparent; transition: 0.3s; }
        .game-card:hover { border-color: var(--accent); background: #2d3e5a; }

        /* Level Map */
        #map-grid { display: grid; grid-template-columns: repeat(5, 1fr); gap: 12px; padding: 20px; overflow-y: auto; max-height: 60vh; background: #111827; border-radius: 15px; margin-top: 20px; }
        .level-box { width: 50px; height: 50px; background: #374151; border-radius: 10px; display: flex; align-items: center; justify-content: center; font-weight: bold; cursor: not-allowed; opacity: 0.5; }
        .unlocked { background: var(--success); opacity: 1; cursor: pointer; box-shadow: 0 0 10px var(--success); }

        input { padding: 12px; border-radius: 8px; border: 1px solid #334155; background: #1e293b; color: white; width: 220px; margin-bottom: 10px; }
    </style>
</head>
<body>

    <div id="scr-login" class="screen active">
        <h1 style="font-size: 3rem; margin-bottom: 10px;">COCO <span style="color:var(--accent)">HUB</span></h1>
        <p style="color: #94a3b8;">‡∑É‡∑ô‡∂Ω‡∑ä‡∂Ω‡∂∏‡∑ä ‡∂ö‡∂ª‡∂±‡∑ä‡∂± ‡∂±‡∂∏ ‡∂á‡∂≠‡∑î‡∑Ö‡∂≠‡∑ä ‡∂ö‡∂ª‡∂±‡∑ä‡∂±</p>
        <input type="text" id="player-name" placeholder="‡∂î‡∂∂‡∑ö ‡∂±‡∂∏...">
        <button class="btn" onclick="startApp()">LOGIN ONLINE</button>
    </div>

    <div id="scr-hub" class="screen">
        <div class="top-bar">
            <span>üí∞ Coins: <b id="h-coins">0</b></span>
            <span>üèÜ Level: <b id="h-level">1</b></span>
            <button class="btn" style="padding:5px 15px; background: #eab308;" onclick="navTo('scr-wallet')">Wallet</button>
        </div>
        <h2>SELECT ADVENTURE</h2>
        <div class="hub-container">
            <div class="game-card" onclick="navTo('scr-map')">
                <div style="font-size: 50px;">üéØ</div>
                <h3>Pin Challenge</h3>
            </div>
            <div class="game-card" onclick="alert('Coco Runner ‡∑Ä‡∑ê‡∂© ‡∂ö‡∂ª‡∂∏‡∑í‡∂±‡∑ä ‡∂¥‡∑Ä‡∂≠‡∑í‡∂±‡∑Ä‡∑è (Coming Soon)')">
                <div style="font-size: 50px;">üèÉ</div>
                <h3>Coco Runner</h3>
            </div>
        </div>
        <button class="btn" style="margin-top:40px; background:#ef4444;" onclick="location.reload()">LOGOUT</button>
    </div>

    <div id="scr-map" class="screen">
        <h2 style="margin-top: 80px;">Level Selection (1-100)</h2>
        <div id="map-grid"></div>
        <button class="btn" onclick="navTo('scr-hub')" style="margin-top:20px; background:#475569;">Back to Menu</button>
    </div>

    <div id="scr-wallet" class="screen">
        <h1>My Crypto Wallet</h1>
        <div style="background: var(--card-bg); padding: 30px; border-radius: 20px; border: 1px solid #eab308;">
            <p>‡∂¥‡∑Ä‡∂≠‡∑í‡∂± ‡∂ö‡∑ú‡∂∫‡∑í‡∂±‡∑ä ‡∂ú‡∂´‡∂±: <b id="w-coins" style="color: #eab308; font-size: 1.5rem;">0</b></p>
            <p style="font-size: 0.8rem; color: #94a3b8;">Minimum Withdrawal: 1000 Coco Coins</p>
            <button class="btn" style="background: #444; cursor: not-allowed;" disabled>Wallet: Coming Soon</button>
        </div>
        <button class="btn" onclick="navTo('scr-hub')" style="margin-top: 20px;">Back</button>
    </div>

    <script>
        // Global Data
        let stats = { coins: 0, unlockedLevel: 1, playerName: "" };

        // Navigation Logic
        function navTo(screenId) {
            document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
            const target = document.getElementById(screenId);
            if(target) {
                target.classList.add('active');
                if(screenId === 'scr-map') renderMap();
                refreshUI();
            }
        }

        // Login Process
        function startApp() {
            const nameInput = document.getElementById('player-name').value;
            if(nameInput.trim().length >= 3) {
                stats.playerName = nameInput;
                navTo('scr-hub');
            } else {
                alert("‡∂ö‡∂ª‡∑î‡∂´‡∑è‡∂ö‡∂ª ‡∂Ö‡∑Ä‡∂∏ ‡∂Ö‡∂ö‡∑î‡∂ª‡∑î 3‡∂ö ‡∂±‡∂∏‡∂ö‡∑ä ‡∂á‡∂≠‡∑î‡∑Ö‡∂≠‡∑ä ‡∂ö‡∂ª‡∂±‡∑ä‡∂±.");
            }
        }

        // UI Refresh
        function refreshUI() {
            document.getElementById('h-coins').innerText = stats.coins;
            document.getElementById('w-coins').innerText = stats.coins;
            document.getElementById('h-level').innerText = stats.unlockedLevel;
        }

        // Level Map Generator
        function renderMap() {
            const grid = document.getElementById('map-grid');
            grid.innerHTML = "";
            for(let i=1; i<=100; i++) {
                const node = document.createElement('div');
                node.className = `level-box ${i <= stats.unlockedLevel ? 'unlocked' : ''}`;
                node.innerText = i;
                if(i <= stats.unlockedLevel) {
                    node.onclick = () => alert("Level " + i + " ‡∑É‡∑ô‡∂Ω‡∑ä‡∂Ω‡∂∏‡∑ä ‡∂ö‡∑í‡∂ª‡∑ì‡∂∏‡∂ß ‡∑É‡∑ñ‡∂Ø‡∑è‡∂±‡∂∏‡∑ä!");
                }
                grid.appendChild(node);
            }
        }   // --- PIN GAME VARIABLES ---
let canvas, ctx;
let angle = 0;
let pinsInWheel = []; // ‡∂ª‡∑Ä‡∑î‡∂∏‡∑ö ‡∑Ä‡∑ê‡∂Ø‡∑ì ‡∂á‡∂≠‡∑í ‡∂¥‡∑í‡∂±‡∑ä
let pinsLeft = 5;
let isGameOver = false;

function startPinGame(level) {
    navTo('scr-game'); // ‡∂ú‡∑ö‡∂∏‡∑ä ‡∑É‡∑ä‡∂ö‡∑ä‚Äç‡∂ª‡∑ì‡∂±‡∑ä ‡∂ë‡∂ö‡∂ß ‡∂∫‡∂±‡∑ä‡∂±
    canvas = document.getElementById('pinCanvas');
    ctx = canvas.getContext('2d');
    
    // ‡∂∏‡∑ñ‡∂Ω‡∑í‡∂ö ‡∂Ø‡∂≠‡∑ä‡∂≠ ‡∑É‡∂ö‡∑É‡∂∏‡∑î
    pinsInWheel = [];
    pinsLeft = 5; 
    isGameOver = false;
    currentLvl = level;
    
    animate();
}

function animate() {
    if (isGameOver || document.getElementById('scr-game').classList.contains('active') === false) return;

    ctx.clearRect(0, 0, canvas.width, canvas.height);
    
    // 1. ‡∂ö‡∑ê‡∂ª‡∂ö‡∑ô‡∂± ‡∂∏‡∑ê‡∂Ø ‡∂ª‡∑Ä‡∑î‡∂∏ ‡∂á‡∂≥‡∑ì‡∂∏
    ctx.save();
    ctx.translate(canvas.width / 2, 150);
    ctx.rotate(angle);
    
    // ‡∂Ω‡∑ú‡∂ö‡∑î ‡∂ª‡∑Ä‡∑î‡∂∏
    ctx.beginPath();
    ctx.arc(0, 0, 50, 0, Math.PI * 2);
    ctx.fillStyle = "#f1c40f";
    ctx.fill();
    ctx.fillStyle = "black";
    ctx.fillText(currentLvl, -5, 5); // ‡∂Ω‡∑ô‡∑Ä‡∂Ω‡∑ä ‡∂ë‡∂ö ‡∂∏‡∑ê‡∂Ø ‡∂¥‡∑ô‡∂±‡∑ä‡∑Ä‡∂∫‡∑í

    // ‡∂ª‡∑Ä‡∑î‡∂∏‡∂ß ‡∑Ä‡∑ê‡∂Ø‡∑ì ‡∂á‡∂≠‡∑í ‡∂¥‡∑í‡∂±‡∑ä ‡∂á‡∂≥‡∑ì‡∂∏
    pinsInWheel.forEach(pAngle => {
        ctx.save();
        ctx.rotate(pAngle);
        ctx.beginPath();
        ctx.moveTo(0, 50);
        ctx.lineTo(0, 120);
        ctx.lineWidth = 3;
        ctx.strokeStyle = "white";
        ctx.stroke();
        
        ctx.beginPath();
        ctx.arc(0, 120, 8, 0, Math.PI * 2);
        ctx.fillStyle = "white";
        ctx.fill();
        ctx.restore();
    });
    ctx.restore();

    // 2. ‡∑Ä‡∑í‡∂Ø‡∑ì‡∂∏‡∂ß ‡∑É‡∑ñ‡∂Ø‡∑è‡∂±‡∂∏‡∑ä ‡∂¥‡∑í‡∂±‡∑ä ‡∂ë‡∂ö ‡∂á‡∂≥‡∑ì‡∂∏
    if (pinsLeft > 0) {
        ctx.beginPath();
        ctx.moveTo(canvas.width / 2, 350);
        ctx.lineTo(canvas.width / 2, 300);
        ctx.stroke();
        ctx.beginPath();
        ctx.arc(canvas.width / 2, 350, 8, 0, Math.PI * 2);
        ctx.fill();
    }

    // ‡∑Ä‡∑ö‡∂ú‡∂∫ ‡∂Ω‡∑ô‡∑Ä‡∂Ω‡∑ä ‡∂Ö‡∂±‡∑î‡∑Ä ‡∑Ä‡∑ê‡∂©‡∑í ‡∑Ä‡∑ö
    angle += 0.02 + (currentLvl * 0.002);
    requestAnimationFrame(animate);
}

function shootPin() {
    if (isGameOver || pinsLeft <= 0) return;

    // ‡∂¥‡∑í‡∂±‡∑ä ‡∂ë‡∂ö‡∂ö‡∑ä ‡∂ª‡∑Ä‡∑î‡∂∏‡∂ß ‡∂ë‡∂ö‡∂≠‡∑î ‡∂ö‡∑í‡∂ª‡∑ì‡∂∏ (‡∂Ø‡∑ê‡∂±‡∂ß ‡∂≠‡∑í‡∂∫‡∑ô‡∂± angle ‡∂ë‡∂ö‡∂ß ‡∑É‡∑è‡∂¥‡∑ö‡∂ö‡∑ä‡∑Ç‡∑Ä)
    let hitAngle = -angle; 
    
    // 3. Collision Detection (‡∂ë‡∂ö‡∂ö‡∑ä ‡∂ã‡∂© ‡∂ë‡∂ö‡∂ö‡∑ä ‡∑Ä‡∂Ø‡∑í‡∂±‡∑Ä‡∑è‡∂Ø ‡∂∂‡∑ê‡∂Ω‡∑ì‡∂∏)
    let collision = pinsInWheel.some(pAngle => {
        let diff = Math.abs(pAngle - hitAngle) % (Math.PI * 2);
        return diff < 0.2 || diff > (Math.PI * 2 - 0.2);
    });

    if (collision) {
        isGameOver = true;
        alert("‡∂¥‡∂ª‡∑è‡∂Ø‡∂∫‡∑í! ‡∂¥‡∑í‡∂±‡∑ä ‡∂ë‡∂ö‡∂ö‡∑ä ‡∂≠‡∑Ä ‡∂ë‡∂ö‡∂ö ‡∑Ä‡∑ê‡∂Ø‡∑î‡∂´‡∑è.");
        showPage('scr-map');
    } else {
        pinsInWheel.push(hitAngle);
        pinsLeft--;
        document.getElementById('pins-left').innerText = pinsLeft;

        // 4. Level Win Logic
        if (pinsLeft === 0) {
            setTimeout(() => {
                let reward = 10 + (currentLvl * 2);
                stats.coins += reward;
                if (currentLvl === stats.unlockedLevel) stats.unlockedLevel++;
                alert("‡∂Ω‡∑ô‡∑Ä‡∂Ω‡∑ä ‡∂ë‡∂ö ‡∂â‡∑Ä‡∂ª‡∂∫‡∑í! ‡∂ö‡∑ú‡∂∫‡∑í‡∂±‡∑ä ‡∂Ω‡∑ê‡∂∂‡∑î‡∂´‡∑è: " + reward);
                showPage('scr-map');
            }, 200);
        }
    }
}
 </script>       
</body>
</html>
